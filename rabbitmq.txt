Что такое RabbitMQ и зачем он нужен

RabbitMQ — это брокер сообщений: приложения отправляют сообщения в очереди, а другие приложения читают их. Это позволяет:

Разделять части системы
Обрабатывать задачи асинхронно
Масштабировать обработку
Обеспечивать надежность (сообщения не теряются)

Что добавлено в приложение

1. Отправка сообщений в очередь
Тип задачи: "Отправить в RabbitMQ"
Можно отправлять одно или несколько сообщений с интервалом

2. Получение сообщений из очереди
Тип задачи: "Слушать очередь RabbitMQ"
Задача слушает очередь и создает уведомления при получении сообщений

Практические примеры использования

Пример 1: Система обработки заказов
Сценарий:- Внешний сервис отправляет заказы в очередь "orders"- Ваше приложение слушает эту очередь и обрабатывает заказыКак использовать:1. Создайте задачу "Слушать очередь RabbitMQ" с очередью "orders"2. Когда придет заказ, вы получите уведомление3. Можете обработать заказ вручную или автоматически

Пример 2: Мониторинг событий
Сценарий:- Разные сервисы отправляют события (логи, ошибки, уведомления)- Ваше приложение собирает все события в одном местеКак использовать:1. Создайте несколько задач для разных очередей:   - "errors" - для ошибок   - "logs" - для логов   - "notifications" - для уведомлений2. Все события будут приходить как уведомления в вашем приложении

Пример 3: Планировщик задач с очередями
Сценарий:- Нужно запускать разные программы в зависимости от типа задачи- Задачи приходят из внешней системыКак использовать:1. Внешняя система отправляет в очередь "task_queue" сообщение:   {"type": "backup", "path": "C:\\backup.exe"}2. Ваше приложение слушает "task_queue"3. При получении сообщения создается задача "Запуск процесса"   с нужными параметрами

Пример 4: Распределенная обработка данных
Сценарий:- Есть большой объем данных для обработки- Нужно обработать их параллельно несколькими процессамиКак использовать:1. Отправьте задачи в очередь "data_processing":   - Сообщение 1: "file1.csv"   - Сообщение 2: "file2.csv"   - Сообщение 3: "file3.csv"2. Создайте несколько задач "Слушать очередь RabbitMQ"    для очереди "data_processing"3. Каждая задача будет обрабатывать свои файлы параллельно

Пример 5: Интеграция с другими приложениями
Сценарий:- У вас есть несколько приложений, которые должны обмениваться данными- Например: веб-сайт → RabbitMQ → ваше приложениеКак использовать:1. Веб-сайт отправляет сообщения в очередь "web_events"2. Ваше приложение слушает "web_events"3. При каждом событии (регистрация, покупка и т.д.)    вы получаете уведомление

Как это работает технически

Отправка сообщений:
1. Вы создаете задачу "Отправить в RabbitMQ"2. Указываете:   - Имя очереди: "my_queue"   - Сообщение: "Hello, RabbitMQ!"   - Количество отправок: 5   - Интервал: 10 секунд3. Задача отправляет 5 сообщений с интервалом 10 секунд

Получение сообщений:
1. Вы создаете задачу "Слушать очередь RabbitMQ"2. Указываете очередь: "my_queue"3. Задача подключается к RabbitMQ и ждет сообщения4. Когда приходит сообщение:   - Создается уведомление в приложении   - Обновляется счетчик полученных сообщений   - Сообщение обрабатывается

Примеры команд для тестирования

Через API (если у вас есть другой клиент):
# Отправить сообщение в очередьPOST http://localhost:5000/api/rabbitmq/publish{  "queueName": "test_queue",  "message": "Тестовое сообщение",  "headers": {    "title": "Важное уведомление"  }}

Через веб-интерфейс RabbitMQ (если включен):
1. Откройте http://localhost:156722. Логин: guest, Пароль: guest3. Перейдите в раздел "Queues"4. Выберите очередь и отправьте сообщение вручную

Типичные сценарии использования

1 Микросервисная архитектура: сервисы обмениваются сообщениями через очереди
2 Очередь задач: задачи ставятся в очередь и обрабатываются воркерами
3 Event-driven архитектура: события отправляются в очереди, подписчики их обрабатывают
4 Логирование и мониторинг: события собираются через очереди
5 Интеграция систем: разные системы обмениваются данными через очереди

Что можно улучшить в будущем
1 Автоматическая обработка сообщений: вместо уведомлений сразу выполнять действия
2 Фильтрация сообщений: обрабатывать только определенные типы
3 Роутинг: направлять сообщения в разные очереди по правилам
4 Обработка ошибок: повторная обработка при сбоях
5 Мониторинг: статистика по сообщениям

Итог: в приложении можно отправлять сообщения в очереди и слушать очереди, получая уведомления. Это позволяет интегрироваться с другими системами и обрабатывать задачи асинхронно.